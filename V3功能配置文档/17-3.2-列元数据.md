# 3.2 列元数据（T_COST_COLUMN_METADATA）配置说明

## 字段说明（基础）
- FIELD_NAME：前端字段名（camelCase）
- COLUMN_NAME：数据库列名（大写下划线）
- QUERY_COLUMN：查询视图列名（可选）
- TARGET_COLUMN：保存表列名（可选）
- HEADER_TEXT：表头显示名称
- DATA_TYPE：text / number / date / datetime
- DISPLAY_ORDER：显示顺序
- SORTABLE / FILTERABLE：是否支持排序/过滤
- IS_VIRTUAL：1=虚拟列（只计算不落库）
- DICT_TYPE：字典类型（下拉/格式化使用）

## 示例：基础列
```sql
INSERT INTO T_COST_COLUMN_METADATA (
  ID, TABLE_METADATA_ID, FIELD_NAME, COLUMN_NAME, HEADER_TEXT, DATA_TYPE, DISPLAY_ORDER, CREATE_BY
) VALUES (
  SEQ_COST_COLUMN_METADATA.NEXTVAL,
  :tableId,
  'amount', 'AMOUNT', '金额', 'number', 20, 'system'
);
```

## 扩展配置（宽度/可见/可编辑/格式/规则）
这些扩展字段由 **COLUMN_OVERRIDE** 规则合并进 ColumnMetadataDTO：
- width / visible / editable / required / searchable / sortable / pinned
- precision / trimZeros / format
- rulesConfig（计算/验证/lookup/样式等）

示例（COLUMN_OVERRIDE 注入）：
```sql
INSERT INTO T_COST_PAGE_RULE (ID, PAGE_CODE, COMPONENT_KEY, RULE_TYPE, RULES, CREATE_BY)
VALUES (
  SEQ_COST_PAGE_RULE.NEXTVAL,
  'cost-demo',
  'masterGrid',
  'COLUMN_OVERRIDE',
  q'~[
    {"field":"amount","width":120,"required":true,"precision":2,"trimZeros":true,
     "rulesConfig":{
       "format":{"precision":2},
       "validation":{"min":0},
       "calculate":{"expression":"qty * price","triggerFields":["qty","price"]}
     }
    }
  ]~',
  'system'
);
```

## 注意事项
- FIELD_NAME 必须与前端字段一致（calc/lookup/validation 都依赖此字段名）。
- 虚拟列（IS_VIRTUAL=1）不会参与保存，但可参与计算与展示。
