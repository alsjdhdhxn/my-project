# 3.4 页面组件（T_COST_PAGE_COMPONENT）配置说明

## 组件类型
- GRID（数据表格）
- FORM（动态表单）
- BUTTON（按钮）
- LAYOUT（布局容器）
- TABS（明细标签页）
- MASTER_DETAIL（主从布局容器）

## 通用字段
- PAGE_CODE / COMPONENT_KEY / COMPONENT_TYPE / PARENT_KEY / SORT_ORDER
- REF_TABLE_CODE：GRID/TABS 默认绑定表
- COMPONENT_CONFIG：JSON 字符串

## 组件配置示例
### LAYOUT
```json
{"direction":"vertical","gap":12,"align":"stretch","justify":"flex-start","fill":true}
```

### GRID
```json
{"width":"100%","height":"100%","className":"master-grid"}
```

### TABS（TabsComponentConfig）
```json
{
  "mode": "group",                      
  "groupField": "dtlType",
  "tabs": [
    {"key":"material","title":"原料","value":"原料","columns":["code","name","qty","costBatch"],"initialSort":[{"colId":"code","sort":"asc"}]},
    {"key":"package","title":"包材","value":"包材","columns":["code","name","qty","costBatch"]}
  ],
  "broadcast": ["taxRate"],
  "calcRules": [],
  "aggregates": [],
  "postProcess": "",
  "masterCalcRules": [],
  "nestedConfig": {
    "enabled": true,
    "summaryColumns": [{"field":"total","headerName":"合计","width":120}],
    "summaryAggregates": [{"sourceField":"costBatch","targetField":"total","algorithm":"SUM"}]
  }
}
```

### FORM
```json
{"rendererKey":"CostForm","placeholder":"请配置表单"}
```

### BUTTON
```json
{"label":"保存","type":"primary","action":"save"}
```

## 示例：组件树
```sql
-- 根容器
INSERT INTO T_COST_PAGE_COMPONENT (ID, PAGE_CODE, COMPONENT_KEY, COMPONENT_TYPE, SORT_ORDER, CREATE_BY)
VALUES (SEQ_COST_PAGE_COMPONENT.NEXTVAL, 'cost-demo', '__root__', 'MASTER_DETAIL', 0, 'system');

-- 主表 Grid
INSERT INTO T_COST_PAGE_COMPONENT (ID, PAGE_CODE, COMPONENT_KEY, COMPONENT_TYPE, PARENT_KEY, REF_TABLE_CODE, SORT_ORDER, CREATE_BY)
VALUES (SEQ_COST_PAGE_COMPONENT.NEXTVAL, 'cost-demo', 'masterGrid', 'GRID', '__root__', 'CostMaster', 10, 'system');

-- 明细 Tabs
INSERT INTO T_COST_PAGE_COMPONENT (ID, PAGE_CODE, COMPONENT_KEY, COMPONENT_TYPE, PARENT_KEY, REF_TABLE_CODE, COMPONENT_CONFIG, SORT_ORDER, CREATE_BY)
VALUES (SEQ_COST_PAGE_COMPONENT.NEXTVAL, 'cost-demo', 'detailTabs', 'TABS', '__root__', 'CostDetail', '{...}', 20, 'system');
```

## 注意事项
- componentKey 必须唯一，且与 PAGE_RULE.componentKey 一致。
- 未找到 GRID/TABS 时，系统会尝试自动推断（仅当页面中唯一一个 GRID/TABS）。
