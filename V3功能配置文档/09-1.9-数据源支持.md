# 1.9 数据源支持（配置说明）

## 配置入口
- **T_COST_PAGE_RULE**（ruleType = GRID_OPTIONS / GRID_FEATURES）
- componentKey：masterGrid 或 tabKey

## 支持的 GridOptions 字段
- rowModelType：clientSide / infinite / serverSide
- cacheBlockSize / maxBlocksInCache
- maxConcurrentDatasourceRequests / blockLoadDebounceMillis（SSRM）
- sideBar / cellSelection / groupBy / groupColumnName / groupDefaultExpanded
- autoSizeColumns / autoSizeMode

## 示例 A：主表 SSRM（推荐）
```sql
INSERT INTO T_COST_PAGE_RULE (ID, PAGE_CODE, COMPONENT_KEY, RULE_TYPE, RULES, CREATE_BY)
VALUES (
  SEQ_COST_PAGE_RULE.NEXTVAL,
  'cost-demo',
  'masterGrid',
  'GRID_OPTIONS',
  '{"rowModelType":"serverSide","cacheBlockSize":100,"maxBlocksInCache":5,"maxConcurrentDatasourceRequests":2,"blockLoadDebounceMillis":100}',
  'system'
);
```

## 示例 B：明细 Client-Side（默认）
```sql
-- 明细无需配置 rowModelType，默认 clientSide
INSERT INTO T_COST_PAGE_RULE (ID, PAGE_CODE, COMPONENT_KEY, RULE_TYPE, RULES, CREATE_BY)
VALUES (
  SEQ_COST_PAGE_RULE.NEXTVAL,
  'cost-demo',
  'material',
  'GRID_OPTIONS',
  '{"autoSizeColumns":true,"autoSizeMode":"fitGridWidth"}',
  'system'
);
```

## 示例 C：Infinite Row Model（仅组件能力）
```json
{"rowModelType":"infinite","cacheBlockSize":100}
```
> 说明：当前 V3 运行时 **主表 rowModelType 被强制覆盖为 serverSide**，明细被强制 clientSide。
> 如需 infinite/clientSide，请先调整前端逻辑（useMetaConfig / useMasterDetailData）。

## 注意事项
- SSRM/Infinite 过滤刷新策略：当前实现使用 `refreshServerSide({ purge:true })`。
- 组件层（MetaGridV3）支持 `datasource` / `serverSideDatasource` 自动挂载，但运行时是否提供数据源取决于当前模式。
