# 4.1 AG Grid 集成（配置说明）

## 可配置入口
- GRID_OPTIONS / GRID_FEATURES（T_COST_PAGE_RULE）
- COLUMN_OVERRIDE.rulesConfig（单元格样式、格式化、比较值）
- ROW_CLASS / ROW_EDITABLE（T_COST_PAGE_RULE）
- SUMMARY_CONFIG / NESTED_CONFIG（嵌套汇总）

## 常用配置示例
### A. 启用侧边栏 + 分组
```json
{"sideBar":true,"groupBy":["dept"],"groupColumnName":"部门"}
```

### B. 行样式（ROW_CLASS）
```json
[{"field":"status","operator":"eq","value":"异常","className":"row-danger"}]
```

### C. 单元格样式（rulesConfig.style）
```json
{
  "style":[
    {"condition":{"type":"compare","operator":">","compareValue":100},"cellStyle":{"color":"#d03050"}}
  ]
}
```

### D. 汇总行（SUMMARY_CONFIG）
```json
{
  "enabled": true,
  "summaryColumns": [{"field":"total","headerName":"合计","width":120}],
  "summaryAggregates": [{"sourceField":"costBatch","targetField":"total","algorithm":"SUM"}]
}
```

## 注意事项
- SSRM/Infinite 的 datasource 会在 grid-ready 时由运行时自动挂载。
- 单元格“脏数据”样式内置 class：`cell-user-changed` / `cell-calc-changed` 等，可自定义 CSS。
