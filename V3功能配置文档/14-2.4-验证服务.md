# 2.4 验证服务（后端规则）配置说明

## 配置入口
- **T_COST_TABLE_METADATA.VALIDATION_RULES**（JSON 数组）

## 规则结构
```json
{
  "order": 1,
  "code": "CHECK_UNIQUE",
  "group": "save",
  "sql": "SELECT COUNT(1) FROM T_COST_MASTER WHERE NAME = ${name} AND DELETED = 0",
  "condition": "result == 0",
  "message": "名称已存在"
}
```

## 示例：保存前唯一性校验
```sql
UPDATE T_COST_TABLE_METADATA
SET VALIDATION_RULES = '[
  {"order":1,"code":"UNIQUE_NAME","group":"save",
   "sql":"SELECT COUNT(1) FROM T_COST_MASTER WHERE NAME = ${name} AND DELETED = 0",
   "condition":"result == 0",
   "message":"名称已存在"}
]'
WHERE TABLE_CODE = 'CostMaster';
```

## 触发方式
- 前端调用 `/api/data/{tableCode}/validate`
- 执行器（/execute）也可携带 validate=true 或 validateGroup

## 注意事项
- `sql` 支持模板变量 `${field}`，从请求 data 中取值。
- `condition` 支持：`== != > >= < <=`（比较 result）。
